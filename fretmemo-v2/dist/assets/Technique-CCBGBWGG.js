import{e as wt,b as mn,c as X,n as Tt,j as e,I as pn,B as I,q as xn,s as hn,u as gn,i as fn,r as i,k as bn,g as jt,l as rt}from"./index-DeqRbqpk.js";import{C as Se,d as Ne,a as nt,b as st}from"./card-lw1R_izi.js";import{F as jn,S as W,L as N,a as qe}from"./label-BKFFXdlT.js";import{B as _e}from"./badge-DCK1EYBp.js";import{a as vn,S as vt}from"./square-B0mSw5Do.js";import{P as Sn}from"./play-7ulEXATi.js";const Nn=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],yn=wt("arrow-left",Nn);const kn=[["path",{d:"M21 4v16",key:"7j8fe9"}],["path",{d:"M6.029 4.285A2 2 0 0 0 3 6v12a2 2 0 0 0 3.029 1.715l9.997-5.998a2 2 0 0 0 .003-3.432z",key:"zs4d6"}]],Pn=wt("skip-forward",kn);function Mn({onOpenSettings:n}){const l=mn(P=>P.bpm),g=X(P=>P.full.instrument.type),y=X(P=>P.quick.tuning),_=Tt(y),B=pn[g];return e.jsxs("div",{className:"flex items-center justify-between gap-3 rounded-full border border-border bg-muted/40 px-3 py-1.5 text-xs text-foreground",children:[e.jsxs("span",{className:"truncate",children:[B," · ",_.slice().reverse().join("-")," · ",l," BPM"]}),n&&e.jsxs(I,{variant:"ghost",size:"icon",className:"h-6 w-6 shrink-0",onClick:n,children:[e.jsx(xn,{className:"h-3.5 w-3.5"}),e.jsx("span",{className:"sr-only",children:"Open settings"})]})]})}const Ct={spider:{name:"Spider Walk",description:"Baseline synchronization exercise",instructions:["Place fingers 1-2-3-4 on adjacent frets","Play each note in sequence","Move to the next string and repeat","Focus on clean, even timing"],defaultBpm:60},permutation:{name:"Permutation Trainer",description:"24 finger patterns for independence",instructions:["Choose a finger permutation pattern","Play the pattern across all strings","Maintain consistent timing","Gradually increase speed"],defaultBpm:60},linear:{name:"Linear Shifter",description:"Horizontal position shifting",instructions:["Play 4 notes on one string","Shift up one fret, repeat","Continue to the 12th fret","Return descending"],defaultBpm:70},diagonal:{name:"Diagonal Patterns",description:"Shape shifting across strings",instructions:["Play a 4-note pattern","Move diagonally across the fretboard","Maintain finger independence","Focus on smooth transitions"],defaultBpm:65},stringskip:{name:"String Skipping",description:"Non-adjacent string targeting",instructions:["Play on string 6, then skip to 4","Continue the skip pattern","Focus on picking accuracy","Keep hand position stable"],defaultBpm:55},legato:{name:"Legato Builder",description:"Hammer-ons and pull-offs",instructions:["Play first note with a pick","Hammer-on the next note","Pull-off back to first note","Focus on even volume"],defaultBpm:80}},me=4,L=12,wn=4,se=[{pattern:[1,2,3,4],tier:1},{pattern:[1,2,4,3],tier:2},{pattern:[1,3,2,4],tier:2},{pattern:[1,3,4,2],tier:2},{pattern:[1,4,2,3],tier:2},{pattern:[1,4,3,2],tier:2},{pattern:[2,1,3,4],tier:2},{pattern:[2,1,4,3],tier:2},{pattern:[2,3,1,4],tier:3},{pattern:[2,3,4,1],tier:2},{pattern:[2,4,1,3],tier:2},{pattern:[2,4,3,1],tier:3},{pattern:[3,1,2,4],tier:3},{pattern:[3,1,4,2],tier:3},{pattern:[3,2,1,4],tier:3},{pattern:[3,2,4,1],tier:3},{pattern:[3,4,1,2],tier:3},{pattern:[3,4,2,1],tier:3},{pattern:[4,1,2,3],tier:3},{pattern:[4,1,3,2],tier:3},{pattern:[4,2,1,3],tier:3},{pattern:[4,2,3,1],tier:3},{pattern:[4,3,1,2],tier:3},{pattern:[4,3,2,1],tier:1}],St={single:"Single Permutation",daily:"Daily Challenge",sequential:"Sequential Trainer",random:"Random Mode"},Nt={ascending:"Ascending",descending:"Descending",full:"Full Run"},Tn={single:[6,4,5,3,4,2,3,1],octave:[6,4,5,3,4,2,3,1],double:[6,3,5,2,4,1],wide:[6,1,5,2,4,3]},at={single:"Single Skip",octave:"Octave Skip",double:"Double Skip",wide:"Wide Skip"},yt={"1-2":[1,2],"1-3":[1,3],"1-4":[1,4],"2-3":[2,3],"2-4":[2,4],"3-4":[3,4]},ze={trill:"Trill",hammerOnly:"Hammer-On Spider",pullOnly:"Pull-Off Descending",threeNote:"3-Note Legato"};function kt(n){return n==="all"?se.map((l,g)=>g):se.reduce((l,g,y)=>(g.tier===n&&l.push(y),l),[])}function Cn(n,l=new Date){if(n.length===0)return 0;const g=l.getFullYear()*1e4+(l.getMonth()+1)*100+l.getDate();return n[g%n.length]}function Fn(n,l){if(n.length===0)return 0;const g=n.indexOf(l),y=g>=0?g:0;return n[(y+1)%n.length]}function Dn(n,l){if(n.length<=1)return n[0]??0;let g=l;for(;g===l;){const y=Math.floor(Math.random()*n.length);g=n[y]}return g}function ne(n,l,g=L){const y=Math.max(1,g-l);return Math.max(1,Math.min(y,Math.round(n)))}function ye(n,l,g){if(g<=l)return l;const y=g-l,_=y*2,B=n%_;return B<=y?l+B:g-(B-y)}function Ue(n,l){return Math.max(0,Math.min(l-1,Math.round(n)-1))}function Ce(n){return n==="down"?"v":"^"}function $n(n,l=L){const g=Math.max(1,l-me+1);return Math.max(1,Math.min(g,Math.round(n)))}function Pt(n,l="up"){return{startFret:$n(n),step:0,stringDirection:l,fretDirection:"right",positions:[null,null,null,null]}}function it(n,l,g={},y,_=L){const B=Math.max(1,Math.min(y,Math.round(g.stringsToPlay??y))),P=y-B,O=g.directionMode??"both",V=Math.max(1,_-me+1);let v={...n,positions:[...n.positions]};for(;;){const D=v.step%me,c=Math.floor(v.step/me);if(c>=B){let K=v.startFret,Y=v.fretDirection;v.fretDirection==="right"?(K+=1,K>V&&(K=V,Y="left")):(K-=1,K<1&&(K=1,Y="right"));const U=O==="ascending"?"up":O==="descending"?"down":v.stringDirection==="down"?"up":"down";v={startFret:K,step:0,stringDirection:U,fretDirection:Y,positions:[null,null,null,null]};continue}const ae=v.stringDirection==="down"?P+c:y-1-c,a=l[D],ie=v.startFret+(a-1),h=[...v.positions];return h[D]={stringIndex:ae,fret:ie,finger:a},{nextState:{...v,step:v.step+1,positions:h},currentString:ae,activeFingerSlot:D}}}function Mt(n,l,g,y){const _=[];for(let B=0;B<n.length;B++){const P=n[B];if(!P)continue;const O=y[P.stringIndex];_.push({position:{stringIndex:P.stringIndex,fret:P.fret,note:rt(O,P.fret)},status:B===l?"active":"correct",label:`${P.finger}`,emphasis:B===l?"strong":"normal"})}return _}function An(n,l,g,y,_,B=L,P=8){const O={...n,positions:[...n.positions]},V=new Map;for(let v=0;v<P;v++){const D=it(O,l,g,y,B);O.startFret=D.nextState.startFret,O.step=D.nextState.step,O.stringDirection=D.nextState.stringDirection,O.fretDirection=D.nextState.fretDirection,O.positions=[...D.nextState.positions];const c=D.nextState.positions[D.activeFingerSlot];if(!c)continue;const ae=v+1,a=`${c.stringIndex}-${c.fret}`,ie=V.get(a);(!ie||ae<ie.distance)&&V.set(a,{placement:c,distance:ae})}return Array.from(V.values()).sort((v,D)=>v.distance-D.distance).map(({placement:v,distance:D})=>({position:{stringIndex:v.stringIndex,fret:v.fret,note:rt(_[v.stringIndex],v.fret)},status:"idle",opacity:D<=2?.45:D<=4?.28:.12}))}function _n(){const{id:n}=hn(),l=n&&Ct[n]?n:"spider";return e.jsx(Bn,{exerciseId:l},l)}function Bn({exerciseId:n}){const l=gn(),g=fn(),y=Ct[n],_=X(t=>t.modules.technique),B=X(t=>t.quick.tuning),P=i.useMemo(()=>Tt(B),[B]),O=X(t=>t.full.instrument.leftHanded),V=X(t=>t.full.audio.volume),v=X(t=>t.updateModuleSettings),D=_.startingBpm?.[n]??y.defaultBpm,c=P.length,ae=i.useMemo(()=>bn(P),[P]),[a,ie]=i.useState(!1),[h,K]=i.useState(D),[Y,U]=i.useState(0),[Ft,re]=i.useState(()=>Math.max(0,c-1)),[m,Dt]=i.useState(5),[ke,$t]=i.useState(!1),[At,oe]=i.useState([]),[le,Fe]=i.useState(0),[z,Bt]=i.useState("single"),[De,Lt]=i.useState("all"),[pe,Rt]=i.useState(()=>Math.max(1,c)),[xe,Et]=i.useState("both"),ot=!0,[Pe,It]=i.useState(2),[ce,Ot]=i.useState("ascending"),[he,qt]=i.useState(4),[$e,_t]=i.useState("alternate"),[Ge,zt]=i.useState(!0),[ge,Ut]=i.useState("single"),[fe,Gt]=i.useState("alternate"),[He,Ht]=i.useState("down"),[Ae,Vt]=i.useState(!0),[q,Kt]=i.useState("trill"),[be,Qt]=i.useState("1-2"),[Q,Wt]=i.useState(()=>Math.max(1,c)),[Me,lt]=i.useState(12),[Ve,Xt]=i.useState(4),[de,Yt]=i.useState("ascending"),[Be,Jt]=i.useState(1),[Ke,Zt]=i.useState("alternate"),[G,J]=i.useState(null),[en,Z]=i.useState("1-2-3-4"),[ct,Qe]=i.useState(D),[ee,tn]=i.useState(!1),[we,nn]=i.useState(5),[te,sn]=i.useState(8),[dt,ut]=i.useState(0),Le=i.useRef(null),Re=i.useRef(null),We=i.useRef(0),ue=i.useRef(D),Xe=i.useRef(0),Ee=i.useRef(0),je=i.useRef(Pt(m)),H=i.useMemo(()=>kt(De),[De]),mt=i.useMemo(()=>Cn(H),[H]),Te=i.useMemo(()=>H.length===0?0:z==="daily"?mt:H.includes(le)?le:H[0],[H,z,mt,le]),pt=se[Te]?.pattern??se[0].pattern,xt=se[Te]?.tier??1,ht=n==="permutation",ve=Tn[ge],gt=yt[be],an=i.useMemo(()=>n==="permutation"?pt.join("-"):n==="diagonal"?`${Nt[ce]} (${he} str)`:n==="stringskip"?at[ge]:n==="legato"?q==="trill"?`${ze[q]} ${be}`:ze[q]:n==="linear"?`String ${Q} • ${de}`:"1-2-3-4",[n,pt,ce,he,ge,q,be,Q,de]),rn=a?en:an,Ie=i.useCallback((t,s)=>t%2===0==(s==="down")?"down":"up",[]),ft=i.useCallback(()=>n!=="permutation"?"up":xe==="descending"?"down":"up",[n,xe]),C=i.useCallback((t,s)=>{const r=t??m,u=s??h;je.current=Pt(r,ft()),U(0),re(n==="linear"?Ue(Q,c):c-1),oe([]),J(null),Z("1-2-3-4"),ue.current=u,Qe(u),Xe.current=0,ut(0),Ee.current=0,We.current=0},[m,h,ft,n,Q,c]),Ye=i.useCallback(()=>{if(typeof window>"u")return;const t=window.AudioContext||window.webkitAudioContext;if(!t)return;let s=Re.current;(!s||s.state==="closed")&&(s=new t,Re.current=s),s.state==="suspended"&&s.resume();const r=We.current,u=r%4===0,k=Math.max(0,Math.min(1,V)),p=s.createOscillator(),f=s.createGain();p.connect(f),f.connect(s.destination),p.type="triangle",p.frequency.setValueAtTime(u?1040:760,s.currentTime);const x=Math.max(.005,(u?.14:.08)*Math.max(.2,k));f.gain.setValueAtTime(x,s.currentTime),f.gain.exponentialRampToValueAtTime(.001,s.currentTime+.05),p.start(s.currentTime),p.stop(s.currentTime+.05),We.current=r+1},[V]),on=i.useCallback(t=>{const s=X.getState().modules.technique.startingBpm??{};v("technique",{startingBpm:{...s,[n]:t}})},[n,v]),ln=i.useCallback(t=>{const s=X.getState().modules.technique,r=s.bestBpm??{},u=s.sessionsCompleted??{},k=s.lastPracticedAt??{},p=r[n]??0,f=u[n]??0;v("technique",{bestBpm:{...r,[n]:Math.max(p,Math.round(t))},sessionsCompleted:{...u,[n]:f+1},lastPracticedAt:{...k,[n]:new Date().toISOString()}})},[n,v]),Je=i.useCallback(()=>{const t=(r,u,k,p)=>{const f=Math.max(0,Math.min(c-1,r)),M=Math.max(1,Math.min(L,Math.round(u))),x=P[f];return{position:{stringIndex:f,fret:M,note:rt(x,M)},status:k,label:p}};if(n==="spider"||n==="permutation"){if(n==="permutation"){const p=H.length>0?H:[0],f=pe*me,M=je.current.step>=f;let x=Te;if(M){if(z==="sequential"){const j=Fn(p,x);x=j,j!==le&&Fe(j)}else if(z==="random"){const j=Math.max(1,Pe)*wn;if(Ee.current>=j){Ee.current=0;const $=Dn(p,x);x=$,$!==le&&Fe($)}}}const d=se[x]?.pattern??se[0].pattern,b=it(je.current,d,{stringsToPlay:pe,directionMode:xe},c,L);je.current=b.nextState,re(b.currentString),oe(Mt(b.nextState.positions,b.activeFingerSlot,ot,P)),z==="random"&&(Ee.current+=1),J(null),Z(d.join("-")),U(j=>j+1);return}const r=it(je.current,[1,2,3,4],{},c,L);je.current=r.nextState,re(r.currentString);const u=Mt(r.nextState.positions,r.activeFingerSlot,!0,P),k=An(r.nextState,[1,2,3,4],{},c,P,L,8);oe([...u,...k]),J(null),Z("1-2-3-4"),U(p=>p+1);return}const s=Y;if(n==="diagonal"){const r=Math.max(2,Math.min(c,he)),u=Math.max(1,c-r+1),k=Math.floor(s/r),p=s%r,f=Math.floor(k/u),M=k%u,x=ce==="full"?k%2===0?"ascending":"descending":ce,d=r-1,b=ne(m,d),j=Math.max(b,L-d),$=ye(f,b,j),E=c-1-M,S=x==="ascending",w=S?E-p:E-(r-1-p),o=S?$+p:$+(r-1-p),F=S?p+1:r-p,T=[t(w,o,"active",`${Math.max(1,Math.min(4,F))}`)];let A=null;if(Ge){const R=$e==="alternate"?Ie(s,"down"):S?"down":"up";A={label:$e==="economy"?"Economy Picking":"Alternate Picking",notation:Ce(R),detail:R==="down"?"Downstroke":"Upstroke"}}re(w),oe(T),J(A),Z(`${Nt[ce]} (${r} str)`),U(R=>R+1);return}if(n==="stringskip"){const r=[1,2,3,4],u=ve.length,k=s%u,p=Math.floor(s/u),f=ve[k],M=Ue(f,c),x=r[s%r.length],d=ne(m,me-1),b=Math.max(d,L-(me-1)),j=ye(p,d,b),$=j+x-1,E=T=>{const A=Math.max(0,T),R=A%u,et=ve[R];let Oe=Ie(A,He);if(fe!=="alternate"&&A>0){const tt=ve[(R-1+u)%u],bt=et<tt;Oe=fe==="inside"?bt?"down":"up":bt?"up":"down"}return Oe},S=E(s),w=Ae?`${x}${Ce(S)}`:`${x}`,o=[t(M,$,"active",w)];if(s>0){const T=ve[(k-1+u)%u],A=Ue(T,c),R=r[(s-1)%r.length],et=j+R-1,Oe=E(s-1),tt=Ae?`${R}${Ce(Oe)}`:`${R}`;o.unshift(t(A,et,"correct",tt))}const F={label:fe==="alternate"?"Alternate Picking":fe==="inside"?"Inside Picking":"Outside Picking",notation:Ce(S),detail:S==="down"?"Downstroke":"Upstroke"};re(M),oe(o),J(F),Z(at[ge]),U(T=>T+1);return}if(n==="legato"){const r=ne(m,4),u=[1,2,3,4],k=[4,3,2,1],p=[];let f=null,M=5;if(q==="trill"){const[x,d]=gt,b=d-1,j=Math.floor(s/16)%c,$=Math.floor(s/(16*c)),E=ne(r,b),S=Math.max(E,L-b),w=ye($,E,S),o=w+x-1,F=w+d-1,T=s%2===1;M=c-1-j;const A=!T&&s>0?`${x}p`:`${x}`,R=T&&s>0?`${d}h`:`${d}`;p.push(t(M,o,T?"correct":"active",A)),p.push(t(M,F,T?"active":"correct",R)),s===0?f={label:"Pick",notation:`${o}`,detail:"Initial picked note"}:T?f={label:"Hammer-On",notation:`${o}h${F}`,detail:"Legato ascent"}:f={label:"Pull-Off",notation:`${F}p${o}`,detail:"Legato descent"}}else if(q==="hammerOnly"){const d=s%4,b=Math.floor(s/4)%c,j=Math.floor(s/(4*c)),$=ne(r,3),E=Math.max($,L-3),S=ye(j,$,E);M=c-1-b;for(let w=0;w<=d;w++){const o=u[w],F=S+o-1,T=w===d,A=d>0?`${o}h`:`${o}`;p.push(t(M,F,T?"active":"correct",T?A:`${o}`))}if(d===0)f={label:"Pick",notation:`${S}`,detail:"First note per string"};else{const w=S+u[d-1]-1,o=S+u[d]-1;f={label:"Hammer-On",notation:`${w}h${o}`,detail:"No additional pick"}}}else if(q==="pullOnly"){const d=s%4,b=Math.floor(s/4)%c,j=Math.floor(s/(4*c)),$=ne(r,3),E=Math.max($,L-3),S=ye(j,$,E);M=c-1-b;const w=1,o=k[d],F=S+w-1;o!==w&&p.push(t(M,F,"correct",`${w}`));const T=S+o-1;if(p.push(t(M,T,"active",d===0||o===w?`${o}`:`${o}p`)),d===0)f={label:"Pick",notation:`${S+k[0]-1}`,detail:"Pick high note while index stays planted"};else{const A=S+k[d-1]-1,R=S+k[d]-1;f={label:"Pull-Off",notation:`${A}p${R}`,detail:"Keep index anchored and release down"}}}else{const d=[1,3,4],b=[0,2,4],j=s%3,$=Math.floor(s/3)%c,E=Math.floor(s/(3*c)),S=ne(r,4),w=Math.max(S,L-4),o=ye(E,S,w);M=c-1-$;for(let F=0;F<=j;F++){const T=o+b[F],A=F===j,R=j>0?`${d[F]}h`:`${d[F]}`;p.push(t(M,T,A?"active":"correct",A?R:`${d[F]}`))}if(j===0)f={label:"Pick",notation:`${o}`,detail:"Start each string with pick"};else{const F=o+b[j-1],T=o+b[j];f={label:"Hammer-On",notation:`${F}h${T}`,detail:"2 legato notes per string"}}}re(M),oe(p),J(f),Z(q==="trill"?`${ze[q]} ${be}`:ze[q]),U(x=>x+1);return}if(n==="linear"){const r=Math.max(4,Math.min(6,Ve)),u=r-1,k=ne(m,u),p=Math.max(k+u,Math.min(L,Math.round(Me))),f=Math.max(k,p-u),M=Math.floor(s/r),x=s%r,d=Math.max(1,Be);let b=k;if(de==="ascending")b=Math.min(k+M*d,f);else if(de==="descending")b=Math.max(f-M*d,k);else{const o=Math.floor((f-k)/d);if(o>0){const F=o*2,T=M%F,A=T<=o?T:F-T;b=k+A*d}}const j=Ue(Q,c),$=b+x,E=x%4+1,S=[];let w=null;if(Ke==="legato"){for(let o=0;o<=x;o++)S.push(t(j,b+o,o===x?"active":"correct",`${o%4+1}`));x===0?w={label:"Pick",notation:`${b}`,detail:"Initial attack"}:w={label:"Hammer-On",notation:`${b+x-1}h${b+x}`,detail:"Legato within shift group"}}else{S.push(t(j,$,"active",`${E}`));const o=Ie(s,"down");w={label:"Alternate Picking",notation:Ce(o),detail:o==="down"?"Downstroke":"Upstroke"}}re(j),oe(S),J(w),Z(`String ${Q} • ${de}`),U(o=>o+1);return}J(null),Z("1-2-3-4"),U(r=>r+1)},[Y,n,le,z,xe,pe,ot,Pe,Te,H,Ie,m,ce,he,$e,Ge,ve,ge,fe,He,Ae,q,be,gt,Q,Me,Ve,de,Be,Ke,c,P]),Ze=i.useCallback(()=>{Ye(),Je();let t=Xe.current+1,s=ue.current;ee&&t>=te&&(t=0,s=Math.min(280,ue.current+we)),Xe.current=t,ut(t),ue.current=s,Qe(s)},[Ye,Je,ee,te,we]);i.useEffect(()=>{if(!a||ke)return;const t=()=>{Le.current=setTimeout(()=>{Ze(),t()},6e4/ue.current)};return t(),()=>{Le.current&&(clearTimeout(Le.current),Le.current=null)}},[a,ke,Ze]);const cn=()=>{ke&&(Ye(),Je())};i.useEffect(()=>()=>{const t=Re.current;t&&t.state!=="closed"&&t.close(),Re.current=null},[]);const dn=()=>{if(a){Y>0&&ln(ue.current),ie(!1),C();return}C(),ie(!0),Ze()},un=()=>{if(g.state?.fromTrain){l(-1);return}l("/train",{state:{restoreTrain:!0}})};return e.jsxs("div",{className:"space-y-6 pb-8",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(I,{variant:"ghost",size:"icon",onClick:un,children:e.jsx(yn,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:y.name}),e.jsx("p",{className:"text-muted-foreground",children:y.description}),e.jsx("div",{className:"mt-2 max-w-xl",children:e.jsx(Mn,{onOpenSettings:()=>l("/me?section=settings")})})]})]}),e.jsxs("div",{className:"grid lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsx(Se,{children:e.jsx(Ne,{className:"p-4",children:e.jsx(jn,{frets:12,activeNotes:At,tuning:P,leftHanded:O,className:"max-w-full"})})}),G&&e.jsx(Se,{className:"border-primary/30 bg-primary/5",children:e.jsxs(Ne,{className:"p-3",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsx("span",{className:"text-xs uppercase tracking-wide text-muted-foreground",children:"Action Cue"}),e.jsx(_e,{variant:"secondary",children:G.label})]}),e.jsx("div",{className:"mt-1 font-mono text-lg",children:G.notation}),G.detail&&e.jsx("p",{className:"mt-1 text-xs text-muted-foreground",children:G.detail})]})}),e.jsx(Se,{children:e.jsx(Ne,{className:"p-4",children:e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(I,{size:"lg",className:jt("w-32",a?"control-btn":"control-btn--primary"),onClick:dn,children:a?e.jsxs(e.Fragment,{children:[e.jsx(vn,{className:"mr-2 h-4 w-4 fill-current"})," Stop"]}):e.jsxs(e.Fragment,{children:[e.jsx(Sn,{className:"mr-2 h-4 w-4"})," Start"]})}),ke&&a&&e.jsxs(I,{variant:"outline",onClick:cn,children:[e.jsx(Pn,{className:"mr-2 h-4 w-4"}),"Next Step"]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(vt,{className:"w-4 h-4 text-muted-foreground"}),e.jsxs("span",{className:"text-sm font-medium min-w-[60px]",children:[a?ct:h," BPM"]})]}),e.jsx(W,{value:[h],onValueChange:([t])=>{K(t),on(t),a||(ue.current=t,Qe(t))},min:30,max:200,step:5,className:"w-32",disabled:a})]})]})})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(Se,{children:[e.jsx(nt,{children:e.jsx(st,{className:"text-lg",children:"Instructions"})}),e.jsx(Ne,{children:e.jsx("ol",{className:"space-y-2 list-decimal list-inside",children:y.instructions.map((t,s)=>e.jsx("li",{className:"text-sm text-muted-foreground",children:t},s))})})]}),e.jsxs(Se,{children:[e.jsx(nt,{children:e.jsxs(st,{className:"text-lg flex items-center gap-2",children:[e.jsx(vt,{className:"w-4 h-4"}),"Settings"]})}),e.jsxs(Ne,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(N,{htmlFor:"step-mode",children:"Step Mode"}),e.jsx(qe,{id:"step-mode",checked:ke,onCheckedChange:$t,disabled:a})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{children:"Start Fret"}),e.jsx("div",{className:"flex gap-2",children:[1,3,5,7].map(t=>e.jsx(I,{variant:m===t?"default":"outline",size:"sm",onClick:()=>{Dt(t),n==="linear"&&Me<t+3&&lt(Math.min(L,t+3)),a||C(t,h)},disabled:a,className:"flex-1",children:t},t))})]}),ht&&e.jsxs("div",{className:"space-y-4 rounded-md border border-border/50 p-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"permutation-mode",children:"Mode"}),e.jsx("select",{id:"permutation-mode",value:z,onChange:t=>{Bt(t.target.value),a||C(m,h)},disabled:a,className:"flex h-9 w-full rounded-md border border-input bg-background px-3 py-2 text-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",children:Object.entries(St).map(([t,s])=>e.jsx("option",{value:t,children:s},t))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"permutation-tier",children:"Tier"}),e.jsxs("select",{id:"permutation-tier",value:String(De),onChange:t=>{const s=t.target.value,r=s==="all"?"all":Number(s),u=kt(r);Lt(r),u.includes(le)||Fe(u[0]??0),a||C(m,h)},disabled:a,className:"flex h-9 w-full rounded-md border border-input bg-background px-3 py-2 text-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",children:[e.jsx("option",{value:"all",children:"All Tiers (24)"}),e.jsx("option",{value:"1",children:"Tier 1 - Beginner"}),e.jsx("option",{value:"2",children:"Tier 2 - Intermediate"}),e.jsx("option",{value:"3",children:"Tier 3 - Advanced"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"permutation-pattern",children:"Pattern"}),e.jsx("select",{id:"permutation-pattern",value:String(Te),onChange:t=>{Fe(Number(t.target.value)),a||C(m,h)},disabled:a||z==="daily",className:"flex h-9 w-full rounded-md border border-input bg-background px-3 py-2 text-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",children:H.map(t=>{const s=se[t];return e.jsxs("option",{value:t,children:["#",t+1," - ",s.pattern.join("-")," (T",s.tier,")"]},t)})}),z==="daily"&&e.jsx("p",{className:"text-xs text-muted-foreground",children:"Daily challenge selects a fixed pattern for today."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx(N,{className:"text-sm",children:"Strings to play"}),e.jsx("span",{className:"font-mono text-xs",children:pe})]}),e.jsx(W,{value:[pe],onValueChange:([t])=>{Rt(t),a||C(m,h)},min:1,max:c,step:1,disabled:a})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{children:"Direction"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:[{value:"ascending",label:"Ascending"},{value:"descending",label:"Descending"},{value:"both",label:"Both"}].map(t=>e.jsx(I,{variant:xe===t.value?"default":"outline",size:"sm",onClick:()=>{Et(t.value),a||C(m,h)},disabled:a,children:t.label},t.value))})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(N,{children:"Sticky Fingers"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Enabled by default in Permutation Trainer (Spider-style)."})]}),e.jsx(_e,{variant:"secondary",children:"On"})]}),z==="random"&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx(N,{className:"text-sm",children:"Random switch every"}),e.jsxs("span",{className:"font-mono text-xs",children:[Pe," bar",Pe>1?"s":""]})]}),e.jsx(W,{value:[Pe],onValueChange:([t])=>{It(t),a||C(m,h)},min:1,max:8,step:1,disabled:a})]})]}),n==="diagonal"&&e.jsxs("div",{className:"space-y-4 rounded-md border border-border/50 p-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{children:"Pattern"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:[{value:"ascending",label:"Ascending"},{value:"descending",label:"Descending"},{value:"full",label:"Full"}].map(t=>e.jsx(I,{variant:ce===t.value?"default":"outline",size:"sm",onClick:()=>{Ot(t.value),a||C(m,h)},disabled:a,children:t.label},t.value))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx(N,{className:"text-sm",children:"Strings per group"}),e.jsx("span",{className:"font-mono text-xs",children:he})]}),e.jsx(W,{value:[he],onValueChange:([t])=>{qt(t),a||C(m,h)},min:2,max:Math.max(2,c),step:1,disabled:a})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{children:"Picking Style"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:[{value:"alternate",label:"Alternate"},{value:"economy",label:"Economy"}].map(t=>e.jsx(I,{variant:$e===t.value?"default":"outline",size:"sm",onClick:()=>{_t(t.value),a||C(m,h)},disabled:a,children:t.label},t.value))})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(N,{htmlFor:"diagonal-pick-indicators",children:"Show pick indicators"}),e.jsx(qe,{id:"diagonal-pick-indicators",checked:Ge,onCheckedChange:t=>{zt(t),a||C(m,h)}})]})]}),n==="stringskip"&&e.jsxs("div",{className:"space-y-4 rounded-md border border-border/50 p-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"string-skip-pattern",children:"Skip Pattern"}),e.jsx("select",{id:"string-skip-pattern",value:ge,onChange:t=>{Ut(t.target.value),a||C(m,h)},disabled:a,className:"flex h-9 w-full rounded-md border border-input bg-background px-3 py-2 text-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",children:Object.entries(at).map(([t,s])=>e.jsx("option",{value:t,children:s},t))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{children:"Picking Focus"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:[{value:"alternate",label:"Alternate"},{value:"inside",label:"Inside"},{value:"outside",label:"Outside"}].map(t=>e.jsx(I,{variant:fe===t.value?"default":"outline",size:"sm",onClick:()=>{Gt(t.value),a||C(m,h)},disabled:a,children:t.label},t.value))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{children:"Start Pick Direction"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:[{value:"down",label:"Down (v)"},{value:"up",label:"Up (^)"}].map(t=>e.jsx(I,{variant:He===t.value?"default":"outline",size:"sm",onClick:()=>{Ht(t.value),a||C(m,h)},disabled:a,children:t.label},t.value))})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(N,{htmlFor:"string-skip-pick-indicators",children:"Show pick indicators"}),e.jsx(qe,{id:"string-skip-pick-indicators",checked:Ae,onCheckedChange:t=>{Vt(t),a||C(m,h)}})]})]}),n==="legato"&&e.jsxs("div",{className:"space-y-4 rounded-md border border-border/50 p-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{children:"Exercise Type"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:[{value:"trill",label:"Trill"},{value:"hammerOnly",label:"Hammer Spider"},{value:"pullOnly",label:"Pull Desc"},{value:"threeNote",label:"3-Note"}].map(t=>e.jsx(I,{variant:q===t.value?"default":"outline",size:"sm",onClick:()=>{Kt(t.value),a||C(m,h)},disabled:a,children:t.label},t.value))})]}),q==="trill"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"legato-trill-pair",children:"Trill Pair"}),e.jsx("select",{id:"legato-trill-pair",value:be,onChange:t=>{Qt(t.target.value),a||C(m,h)},disabled:a,className:"flex h-9 w-full rounded-md border border-input bg-background px-3 py-2 text-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",children:Object.keys(yt).map(t=>e.jsx("option",{value:t,children:t},t))})]}),e.jsxs("div",{className:"rounded-md border border-primary/20 bg-primary/5 p-2 text-xs text-muted-foreground",children:["Legato notation follows guitar standard: ",e.jsx("span",{className:"font-mono",children:"5h7"})," for hammer-on, ",e.jsx("span",{className:"font-mono",children:"7p5"})," for pull-off."]})]}),n==="linear"&&e.jsxs("div",{className:"space-y-4 rounded-md border border-border/50 p-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx(N,{className:"text-sm",children:"String"}),e.jsx("span",{className:"font-mono text-xs",children:Q})]}),e.jsx(W,{value:[Q],onValueChange:([t])=>{Wt(t),a||C(m,h)},min:1,max:c,step:1,disabled:a})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx(N,{className:"text-sm",children:"End Fret"}),e.jsx("span",{className:"font-mono text-xs",children:Me})]}),e.jsx(W,{value:[Me],onValueChange:([t])=>{lt(Math.max(m+3,t)),a||C(m,h)},min:Math.min(L,m+3),max:L,step:1,disabled:a})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{children:"Notes per Shift"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:[4,5,6].map(t=>e.jsx(I,{variant:Ve===t?"default":"outline",size:"sm",onClick:()=>{Xt(t),a||C(m,h)},disabled:a,children:t},t))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{children:"Direction"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:[{value:"ascending",label:"Asc"},{value:"descending",label:"Desc"},{value:"roundTrip",label:"Round"}].map(t=>e.jsx(I,{variant:de===t.value?"default":"outline",size:"sm",onClick:()=>{Yt(t.value),a||C(m,h)},disabled:a,children:t.label},t.value))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx(N,{className:"text-sm",children:"Shift Amount"}),e.jsx("span",{className:"font-mono text-xs",children:Be})]}),e.jsx(W,{value:[Be],onValueChange:([t])=>{Jt(t),a||C(m,h)},min:1,max:3,step:1,disabled:a})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{children:"Picking Style"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:[{value:"alternate",label:"Alternate"},{value:"legato",label:"Legato"}].map(t=>e.jsx(I,{variant:Ke===t.value?"default":"outline",size:"sm",onClick:()=>{Zt(t.value),a||C(m,h)},disabled:a,children:t.label},t.value))})]})]}),e.jsxs("div",{className:"space-y-3 border-t border-border/50 pt-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(N,{htmlFor:"speed-up",children:"Auto Speed-Up"}),e.jsx(qe,{id:"speed-up",checked:ee,onCheckedChange:tn})]}),e.jsxs("div",{className:jt("space-y-3",!ee&&"opacity-50"),children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx(N,{className:"text-sm",children:"Increase"}),e.jsxs("span",{className:"font-mono text-xs",children:["+",we," BPM"]})]}),e.jsx(W,{value:[we],onValueChange:([t])=>nn(t),min:1,max:20,step:1,disabled:!ee})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx(N,{className:"text-sm",children:"Every"}),e.jsxs("span",{className:"font-mono text-xs",children:[te," beat",te>1?"s":""]})]}),e.jsx(W,{value:[te],onValueChange:([t])=>sn(t),min:1,max:32,step:1,disabled:!ee})]})]})]})]})]}),e.jsxs(Se,{children:[e.jsx(nt,{children:e.jsx(st,{className:"text-lg",children:"Status"})}),e.jsxs(Ne,{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Current String"}),e.jsx("span",{className:"font-medium",children:ae[Ft]??"-"})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Step"}),e.jsx("span",{className:"font-medium",children:Y})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Tempo"}),e.jsxs("span",{className:"font-medium",children:[a?ct:h," BPM"]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Speed-Up"}),e.jsx("span",{className:"font-medium",children:ee?`+${we}/${te}b`:"Off"})]}),ee&&a&&e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Next Increase In"}),e.jsxs("span",{className:"font-medium",children:[Math.max(0,te-dt)," beat",Math.max(0,te-dt)!==1?"s":""]})]}),ht&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Mode"}),e.jsx("span",{className:"font-medium",children:St[z]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Tier"}),e.jsx("span",{className:"font-medium",children:De==="all"?`All (T${xt})`:`Tier ${xt}`})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Strings"}),e.jsx("span",{className:"font-medium",children:pe})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Direction"}),e.jsx("span",{className:"font-medium capitalize",children:xe})]})]}),G&&e.jsxs("div",{className:"space-y-1 rounded-md border border-primary/20 bg-primary/5 p-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsx("span",{className:"text-muted-foreground",children:"Current Action"}),e.jsx(_e,{variant:"secondary",children:G.label})]}),e.jsx("div",{className:"font-mono text-sm",children:G.notation}),G.detail&&e.jsx("div",{className:"text-xs text-muted-foreground",children:G.detail})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Pattern"}),e.jsx(_e,{variant:"secondary",children:rn})]})]})]})]})]})]})}export{_n as default};
