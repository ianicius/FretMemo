import{e as D,j as e,g as d,u as E,a as H,b as L,r as S,T as C,B as p,F as z}from"./index-8k3NHg1O.js";import{C as f,a as y,b,c as j,d as v}from"./card-DHuo3zQd.js";import{B as N}from"./badge-dDcdEKhE.js";import{Z as G}from"./zap-X4QqOg3m.js";import{S as $}from"./sparkles-D1u3cylx.js";import{P as I}from"./play-Cg0uJj4I.js";import{C as W}from"./chevron-down-KnoLXRSR.js";const _=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],O=D("calendar",_);function Y({value:s,className:n}){const a=Math.min(100,Math.max(0,s));return e.jsx("div",{className:d("relative h-2 w-full overflow-hidden rounded-full bg-muted",n),children:e.jsx("div",{className:"h-full bg-primary transition-all duration-300 ease-out",style:{width:`${a}%`}})})}function q(){const s=new Date,n=Math.floor((s.getTime()-new Date(s.getFullYear(),0,0).getTime())/(1e3*60*60*24)),a=[{id:"speed-20",name:"Speed Sprint",description:"Identify 20 notes as fast as possible",target:20,type:"speed"},{id:"accuracy-50",name:"Accuracy Master",description:"Get 50 correct answers in a row",target:50,type:"accuracy"},{id:"coverage-all",name:"Full Coverage",description:"Practice at least one note on every string",target:6,type:"coverage"},{id:"streak-10",name:"Perfect Streak",description:"Get 10 correct without mistakes",target:10,type:"streak"},{id:"speed-30",name:"Lightning Round",description:"Identify 30 notes in under 2 minutes",target:30,type:"speed"},{id:"accuracy-100",name:"Century Club",description:"Answer 100 questions with 90%+ accuracy",target:100,type:"accuracy"},{id:"strings-all",name:"String Master",description:"Practice all 6 strings equally",target:6,type:"coverage"}];return a[n%a.length]}const x=[{id:"practice-3",name:"Consistent Practice",target:3,current:2,unit:"days"},{id:"notes-100",name:"Note Master",target:100,current:67,unit:"notes"},{id:"streak-7",name:"Week Warrior",target:7,current:5,unit:"days"}],i=[{id:"perfect-session",name:"Perfect Session",description:"Get 20 correct in a row",difficulty:"medium",reward:"Gold Badge",mode:"fretboardToNote",bpm:80,constraints:{noteFilter:"naturals",fretRange:{min:1,max:7}}},{id:"speed-demon",name:"Speed Demon",description:"Practice at 120+ BPM",difficulty:"hard",reward:"Speed Badge",mode:"fretboardToNote",bpm:120,constraints:{noteFilter:"all",fretRange:{min:1,max:12}}},{id:"explorer",name:"Explorer",description:"Practice all 6 strings",difficulty:"easy",reward:"Explorer Badge",mode:"noteToTab",constraints:{enabledStrings:[!0,!0,!0,!0,!0,!0],fretRange:{min:1,max:12}}},{id:"timed-blitz",name:"60s Blitz",description:"Score as many correct answers as possible in 60 seconds",difficulty:"hard",reward:"+250 XP",mode:"fretboardToNote",bpm:90,constraints:{noteFilter:"all",fretRange:{min:1,max:12}},challenge:{type:"timed",label:"60s Blitz",timeLimitSec:60}},{id:"survival",name:"Survival",description:"One mistake ends the run",difficulty:"hard",reward:"Survivor Badge",mode:"fretboardToNote",bpm:75,constraints:{noteFilter:"naturals",fretRange:{min:1,max:10}},challenge:{type:"survival",label:"Survival Mode"}},{id:"find-all-a",name:"Find All A",description:"Locate every A note in your active range",difficulty:"medium",reward:"Navigator Badge",mode:"noteToTab",constraints:{noteFilter:"all",fretRange:{min:1,max:12}},challenge:{type:"findAll",label:"Find All A",targetNote:"A"}}];function ee(){const s=E(),{streakDays:n,totalCorrect:a,totalIncorrect:o}=H(),{setMode:u,setBpm:T,setPracticeConstraints:M}=L(),[g,F]=S.useState(!1),l=S.useMemo(()=>q(),[]),h=a+o>0?Math.round(a/(a+o)*100):0,m=({mode:t="fretboardToNote",source:r,bpm:c,constraints:k,challenge:B})=>{u(t),typeof c=="number"&&T(c),k&&M(k),s("/practice",{state:{openPreFlight:!0,source:r,mode:t,challenge:B}})},P=()=>{if(l.type==="speed"){m({source:"challenges-daily-speed",mode:"fretboardToNote",bpm:90,constraints:{noteFilter:"all",fretRange:{min:1,max:12}}});return}if(l.type==="accuracy"){m({source:"challenges-daily-accuracy",mode:"fretboardToNote",bpm:60,constraints:{noteFilter:"naturals",fretRange:{min:1,max:8}}});return}if(l.type==="coverage"){m({source:"challenges-daily-coverage",mode:"noteToTab",constraints:{enabledStrings:[!0,!0,!0,!0,!0,!0],fretRange:{min:1,max:12},noteFilter:"all"}});return}m({source:"challenges-daily-streak",mode:"fretboardToNote",bpm:70,constraints:{noteFilter:"naturals",fretRange:{min:1,max:5}}})},A=t=>{const r=i.find(c=>c.id===t);r&&m({source:`challenges-hunt-${t}`,mode:r.mode??"fretboardToNote",bpm:r.bpm,constraints:r.constraints,challenge:r.challenge})},R=g?i:i.slice(0,3);return e.jsxs("div",{className:"space-y-6 pb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"type-display",children:"Challenges"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Daily momentum, weekly goals, and long-term hunts."})]}),e.jsxs(f,{className:"border-gold-200 bg-gradient-to-br from-gold-50/90 via-amber-50/50 to-graphite-50 dark:border-amber-500/30 dark:from-amber-900/20 dark:via-slate-950 dark:to-slate-900",children:[e.jsxs(y,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(N,{className:"bg-primary text-primary-foreground hover:bg-primary",children:[e.jsx(G,{className:"mr-1 h-3 w-3"}),"Featured"]}),e.jsx("span",{className:"text-xs text-muted-foreground",children:new Date().toLocaleDateString("en-US",{weekday:"long",month:"short",day:"numeric"})})]}),e.jsx(b,{className:"text-2xl",children:l.name}),e.jsx(j,{children:l.description})]}),e.jsxs(v,{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-sm",children:[e.jsxs("span",{className:"inline-flex items-center gap-1",children:[e.jsx(C,{className:"h-4 w-4 text-graphite-500"}),"Target: ",e.jsx("strong",{children:l.target})]}),e.jsxs("span",{className:"inline-flex items-center gap-1",children:[e.jsx($,{className:"h-4 w-4 text-amber-600"}),"Reward: ",e.jsx("strong",{children:"+100 XP"})]})]}),e.jsxs(p,{size:"lg",className:"control-btn--primary",onClick:P,children:[e.jsx(I,{className:"mr-2 h-4 w-4"}),"Start Challenge"]})]})]}),e.jsxs(f,{children:[e.jsxs(y,{children:[e.jsx(b,{className:"text-xl",children:"This Week"}),e.jsxs(j,{children:[x.filter(t=>t.current>=t.target).length," of ",x.length," goals completed"]})]}),e.jsx(v,{className:"space-y-4",children:x.map(t=>{const r=Math.min(100,Math.round(t.current/t.target*100)),c=t.current>=t.target;return e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"font-medium",children:t.name}),e.jsxs("span",{className:d("text-xs font-semibold",c?"text-emerald-600 dark:text-emerald-400":"text-graphite-500"),children:[t.current,"/",t.target," ",t.unit]})]}),e.jsx(Y,{value:r,className:"h-2"})]},t.id)})})]}),e.jsxs(f,{children:[e.jsxs(y,{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(b,{className:"text-xl",children:"Hunts"}),e.jsxs(N,{variant:"secondary",children:[i.length," active"]})]}),e.jsx(j,{children:"Long-term goals that stay available every day."})]}),e.jsxs(v,{className:"space-y-3",children:[R.map(t=>e.jsxs("div",{className:"flex items-center justify-between gap-3 rounded-xl border border-border bg-card p-3",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"truncate font-semibold",children:t.name}),e.jsx(N,{variant:"outline",className:d("capitalize",t.difficulty==="easy"&&"border-emerald-300 text-emerald-700 dark:border-emerald-500/40 dark:text-emerald-300",t.difficulty==="medium"&&"border-amber-300 text-amber-700 dark:border-amber-500/40 dark:text-amber-300",t.difficulty==="hard"&&"border-rose-300 text-rose-700 dark:border-rose-500/40 dark:text-rose-300"),children:t.difficulty})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:t.description}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Reward: ",t.reward]})]}),e.jsx(p,{variant:"outline",size:"sm",onClick:()=>A(t.id),children:"Start"})]},t.id)),i.length>3&&e.jsxs(p,{variant:"ghost",className:"w-full justify-center gap-2 text-muted-foreground",onClick:()=>F(t=>!t),children:[g?"Show fewer hunts":`Show all ${i.length} hunts`,e.jsx(W,{className:d("h-4 w-4 transition-transform",g&&"rotate-180")})]})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsx(w,{title:"Streak",value:`${n}`,icon:z,tone:"warning"}),e.jsx(w,{title:"Accuracy",value:`${h}%`,icon:C,tone:h>=75?"success":h>=50?"warning":"danger"}),e.jsx(w,{title:"Events",value:`${x.length+i.length}`,icon:O,tone:"default"})]})]})}function w({title:s,value:n,icon:a,tone:o="default"}){const u={default:"text-foreground",success:"text-emerald-600 dark:text-emerald-400",warning:"text-amber-700 dark:text-amber-300",danger:"text-rose-600 dark:text-rose-400"};return e.jsxs("div",{className:"rounded-xl border border-border bg-card p-3 text-center",children:[e.jsx("div",{className:d("mx-auto mb-2 flex h-8 w-8 items-center justify-center rounded-full bg-muted",u[o]),children:e.jsx(a,{className:"h-4 w-4"})}),e.jsx("div",{className:d("text-lg font-bold",u[o]),children:n}),e.jsx("div",{className:"text-xs text-muted-foreground",children:s})]})}export{ee as default};
